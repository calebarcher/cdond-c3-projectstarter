---
- name: "Create directory"
  file:
    path: ~/udapeople
    state: directory

- name: "Extract the backend"
  shell: |
    tar xvfz artifact.tar.gz -C ~/udapeople

- name: "Install Dependencies"
  shell: |
    cd ~/udapeople
    ls -a
    npm install


- name: "Run pm2"
  shell: |
    cd ~/udapeople/backend
    pm2 start npm -- start